const CHIP_RAM = 4096;
const CHIP_WIDTH = 64;
const CHIP_HEIGHT = 32;

const OPCODE_SIZE = 2;

const FONT_SET = [
    0xF0, 0x90, 0x90, 0x90, 0xF0, // 0
    0x20, 0x60, 0x20, 0x20, 0x70, // 1
    0xF0, 0x10, 0xF0, 0x80, 0xF0, // 2
    0xF0, 0x10, 0xF0, 0x10, 0xF0, // 3
    0x90, 0x90, 0xF0, 0x10, 0x10, // 4
    0xF0, 0x80, 0xF0, 0x10, 0xF0, // 5
    0xF0, 0x80, 0xF0, 0x90, 0xF0, // 6
    0xF0, 0x10, 0x20, 0x40, 0x40, // 7
    0xF0, 0x90, 0xF0, 0x90, 0xF0, // 8
    0xF0, 0x90, 0xF0, 0x10, 0xF0, // 9
    0xF0, 0x90, 0xF0, 0x90, 0x90, // A
    0xE0, 0x90, 0xE0, 0x90, 0xE0, // B
    0xF0, 0x80, 0x80, 0x80, 0xF0, // C
    0xE0, 0x90, 0x90, 0x90, 0xE0, // D
    0xF0, 0x80, 0xF0, 0x80, 0xF0, // E
    0xF0, 0x80, 0xF0, 0x80, 0x80, // F
];

class Proccessor {
    constructor() {
        let vram = new Array(CHIP_HEIGHT);
        for (const idx of vram.keys()) {
            vram[idx] = new Array(CHIP_WIDTH);
        }

        let ram = new Uint8Array(CHIP_RAM);
        for (let i = 0; i < FONT_SET.length; i++) {
            ram[i] = FONT_SET[i];
        }

        this.vram = vram
        this.vram_changed = false
        this.ram = ram
        this.stack = new Uint16Array(16)
        this.v = new Uint8Array(16)
        this.i = 0
        this.pc = 0x200
        this.sp = 0
        this.delay_timer = 0
        this.sound_timer = 0
        this.keypad = 
        this.keypad_waiting = false
        this.keypad_register = 0
    }
}